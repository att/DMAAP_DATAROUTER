--
--  This SQL script creates the initial set of tables used by the DR.
--  It is run automatically by the Prov Server if the tables do not exist.
--
-- $Id: mysql_init_0000,v 1.3 2013/07/05 13:22:48 eby Exp $
--

CREATE TABLE FEEDS (
    FEEDID         INT UNSIGNED NOT NULL PRIMARY KEY,
    NAME           VARCHAR(20) NOT NULL,
    VERSION        VARCHAR(20) NOT NULL,
    DESCRIPTION    VARCHAR(256),
    AUTH_CLASS     VARCHAR(32) NOT NULL,
    PUBLISHER      VARCHAR(8) NOT NULL,
    SELF_LINK      VARCHAR(256),
    PUBLISH_LINK   VARCHAR(256),
    SUBSCRIBE_LINK VARCHAR(256),
    LOG_LINK       VARCHAR(256),
    DELETED        BOOLEAN DEFAULT FALSE,
    LAST_MOD       TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE FEED_ENDPOINT_IDS (
    FEEDID        INT UNSIGNED NOT NULL,
    USERID        VARCHAR(20) NOT NULL,
    PASSWORD      VARCHAR(32) NOT NULL
);

CREATE TABLE FEED_ENDPOINT_ADDRS (
    FEEDID        INT UNSIGNED NOT NULL,
    ADDR          VARCHAR(44) NOT NULL
);

CREATE TABLE SUBSCRIPTIONS (
    SUBID              INT UNSIGNED NOT NULL PRIMARY KEY,
    FEEDID             INT UNSIGNED NOT NULL,
    DELIVERY_URL       VARCHAR(256),
    DELIVERY_USER      VARCHAR(20),
    DELIVERY_PASSWORD  VARCHAR(32),
    DELIVERY_USE100    BOOLEAN DEFAULT FALSE,
    METADATA_ONLY      BOOLEAN DEFAULT FALSE,
    SUBSCRIBER         VARCHAR(8) NOT NULL,
    SELF_LINK          VARCHAR(256),
    LOG_LINK           VARCHAR(256),
    LAST_MOD           TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE PARAMETERS (
    KEYNAME        VARCHAR(32) NOT NULL PRIMARY KEY,
    VALUE          VARCHAR(4096) NOT NULL
);
